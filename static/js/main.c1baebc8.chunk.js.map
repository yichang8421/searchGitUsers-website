{"version":3,"sources":["components/Searcher/index.jsx","components/UsersList/index.jsx","App.jsx","index.js"],"names":["Searcher","getKeywords","a","value","keywordsElement","PubSub","publish","isStart","isLoading","fetch","response","json","data","users","items","console","log","err","message","className","ref","c","type","onClick","this","Component","UsersList","state","token","subscribe","_","userObj","setState","unsubscribe","style","color","map","href","html_url","target","rel","src","avatar_url","alt","login","id","App","ReactDom","render","StrictMode","window","root"],"mappings":"oUAKqBA,E,4MAajBC,Y,sBAAc,kCAAAC,EAAA,8EACeC,EADf,EACHC,gBAAkBD,MAIzBE,IAAOC,QAAQ,iBAAkB,CAACC,SAAS,EAAOC,WAAW,IALnD,kBAqCiBC,MAAM,yCAAD,OAA0CN,IArChE,cAqCAO,EArCA,gBAsCaA,EAASC,OAtCtB,OAsCAC,EAtCA,OAuCNP,IAAOC,QAAQ,iBAAkB,CAACE,WAAW,EAAOK,MAAOD,EAAKE,QAvC1D,kDAyCNC,QAAQC,IAAI,qBAAOX,IAAOC,QAAQ,iBAAkB,CAACE,WAAW,EAAOS,IAAK,KAAMC,WAClFH,QAAQC,IAAR,MA1CM,0D,4CAZd,WAAU,IAAD,OACL,OACI,sBAAKG,UAAU,WAAf,UACI,qDACA,sBAAKA,UAAU,MAAf,UACI,uBAAOC,IAAK,SAAAC,GAAC,OAAI,EAAKjB,gBAAkBiB,GAAGC,KAAK,SAChD,wBAAQC,QAASC,KAAKvB,YAAtB,8B,GAPkBwB,aCDjBC,G,kNACjBC,MAAQ,CACJd,MAAO,GACPN,SAAS,EACTC,WAAW,EACXS,IAAK,I,uDAGT,WAAqB,IAAD,OAChBO,KAAKI,MAAQvB,IAAOwB,UAAU,kBAAkB,SAACC,EAAGC,GAChD,EAAKC,SAASD,Q,kCAItB,WACI1B,IAAO4B,YAAYT,KAAKI,S,oBAG5B,WACI,MAAyCJ,KAAKG,MAAvCd,EAAP,EAAOA,MAAON,EAAd,EAAcA,QAASC,EAAvB,EAAuBA,UAAWS,EAAlC,EAAkCA,IAClC,OACI,qBAAKE,UAAU,eAAf,SACI,qBAAKA,UAAU,YAAf,SAEQZ,EAAW,2CACPC,EAAa,4CACTS,EAAO,qBAAIiB,MAAO,CAACC,MAAO,OAAnB,oBAAmClB,KACtCJ,EAAMuB,KAAI,SAAAL,GACN,OACI,oBAAGM,KAAMN,EAAQO,SAAUnB,UAAU,OAAOoB,OAAO,SAC/BC,IAAI,aADxB,UAEI,qBAAKC,IAAKV,EAAQW,WAAYC,IAAKZ,EAAQa,QAC3C,qBAAKzB,UAAU,WAAf,SAA2BY,EAAQa,UAF/Bb,EAAQc,e,GA9BrBpB,cCClBqB,E,4JACjB,WACI,OACI,gCACI,cAAC,EAAD,IACA,cAAC,EAAD,W,GALiBrB,aCDjCsB,IAASC,OACL,cAAC,IAAMC,WAAP,UACI,cAAC,EAAD,MACiBC,OAAOC,Q","file":"static/js/main.c1baebc8.chunk.js","sourcesContent":["import React, {Component} from \"react\";\r\nimport PubSub from \"pubsub-js\";\r\n// import axios from \"axios\";\r\nimport \"./index.css\";\r\n\r\nexport default class Searcher extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"searcher\">\r\n                <h1>Search GitHub Users</h1>\r\n                <div className=\"ipt\">\r\n                    <input ref={c => this.keywordsElement = c} type=\"text\"/>\r\n                    <button onClick={this.getKeywords}>Search</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    getKeywords = async () => {\r\n        const {keywordsElement: {value}} = this;\r\n\r\n        //刚开始时，通知app更新状态\r\n        // updateAppState({isStart: false, isLoading: true});\r\n        PubSub.publish(\"updataUserData\", {isStart: false, isLoading: true});\r\n\r\n        //#region\r\n        // 使用axios发送请求\r\n        // axios.get(`http://localhost:3000/api1/search/users?q=${value}`).then(\r\n        //     response => {\r\n        //         // updateAppState({isLoading: false, users: response.data.items});\r\n        //         PubSub.publish(\"updataUserData\", {isLoading: false, users: response.data.items});\r\n        //     },\r\n        //     error => {\r\n        //         // console.log(\"出错了\", updateAppState({isLoading: false, err: error.message}));\r\n        //         console.log(\"出错了\", PubSub.publish(\"updataUserData\", {isLoading: false, err: error.message}));\r\n        //     }\r\n        // );\r\n        //#endregion\r\n\r\n        //#region\r\n        // 使用 fetch 发送请求（未优化）\r\n        // fetch(`http://localhost:3000/api1/search/users?q=${value}`).then(\r\n        //     response => {\r\n        //         console.log(\"请求发送成功\", response);\r\n        //         return response.json();\r\n        //     },\r\n        //     error => console.log(\"请求发送失败,网络出问题了\", error)\r\n        // ).then(\r\n        //     data => console.log(\"成功了\", data),\r\n        //     reason => console.log(\"失败了\", reason)\r\n        // );\r\n        //#endregion\r\n\r\n        // 使用 fetch 发送请求（优化版）\r\n        try {\r\n            const response = await fetch(`https://api.github.com/search/users?q=${value}`);\r\n            const data = await response.json();\r\n            PubSub.publish(\"updataUserData\", {isLoading: false, users: data.items});\r\n        } catch (error) {\r\n            console.log(\"出错了\", PubSub.publish(\"updataUserData\", {isLoading: false, err: error.message}));\r\n            console.log(error)\r\n        }\r\n    };\r\n}","import React, {Component} from \"react\";\r\nimport PubSub from \"pubsub-js\";\r\nimport \"./index.css\";\r\n\r\nexport default class UsersList extends Component {\r\n    state = {\r\n        users: [],   //存储users信息\r\n        isStart: true,       //标识是否为首次渲染\r\n        isLoading: false,    //标识请求状态\r\n        err: \"\"     //存储搜索错误的相关信息\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.token = PubSub.subscribe(\"updataUserData\", (_, userObj) => {\r\n            this.setState(userObj);\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        PubSub.unsubscribe(this.token);\r\n    }\r\n\r\n    render() {\r\n        const {users, isStart, isLoading, err} = this.state;\r\n        return (\r\n            <div className=\"usersWrapper\">\r\n                <div className=\"usersList\">\r\n                    {\r\n                        isStart ? (<h2>Wellcome!</h2>) :\r\n                            isLoading ? (<h2>Loading...</h2>) :\r\n                                err ? (<h2 style={{color: \"red\"}}>Sorry, {err}</h2>) :\r\n                                    users.map(userObj => {\r\n                                        return (\r\n                                            <a href={userObj.html_url} className=\"item\" target=\"_blank\"\r\n                                               key={userObj.id} rel=\"noreferrer\">\r\n                                                <img src={userObj.avatar_url} alt={userObj.login}/>\r\n                                                <div className=\"userName\">{userObj.login}</div>\r\n                                            </a>\r\n                                        );\r\n                                    })\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n            ;\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport \"./app.css\";\r\nimport Searcher from \"./components/Searcher\";\r\nimport UsersList from \"./components/UsersList\";\r\n\r\nexport default class App extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Searcher/>\r\n                <UsersList/>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from \"react\";\r\nimport ReactDom from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDom.render(\r\n    <React.StrictMode>\r\n        <App/>\r\n    </React.StrictMode>, window.root);"],"sourceRoot":""}